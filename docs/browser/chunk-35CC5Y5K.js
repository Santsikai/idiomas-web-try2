import{a as N,b as j}from"./chunk-PVDU4PFS.js";import{I as D,L as F,N as W,S as q,i as T,j as x,k as L,l as M}from"./chunk-LPSJYQ4T.js";import{Cb as v,Db as S,Eb as b,Hb as V,Pa as l,Qa as w,ca as p,eb as I,gb as d,kb as o,lb as s,ma as U,na as u,nb as y,pb as c,qb as C,sc as P,ua as h,uc as E,va as _,yb as m}from"./chunk-5J3ZMGMD.js";import"./chunk-FNBMN5FH.js";import{f as g}from"./chunk-CQCHLVVT.js";var O=()=>["/pages/admin"];function z(t,e){if(t&1){let f=y();o(0,"div")(1,"button",4),c("click",function(){h(f);let i=C();return _(i.allowEdit())}),m(2,"editar datos"),s()()}}function G(t,e){if(t&1){let f=y();o(0,"div")(1,"button",3),c("click",function(){h(f);let i=C();return _(i.editUser())}),m(2,"guardar cambios"),s()()}}function H(t,e){t&1&&(o(0,"div")(1,"button",5),m(2,"admin"),s()()),t&2&&(l(),d("routerLink",V(1,O)))}var A=(()=>{let e=class e{constructor(n,i){this.userSV=n,this.router=i,this.edit=!0,this.user=new j}ngOnInit(){this.getUser()}getUser(){return g(this,null,function*(){this.getUserData(localStorage.getItem("logUserID"))})}getUserData(n){return g(this,null,function*(){this.user=yield this.userSV.getUser(n)})}editUser(){this.userSV.changePass(this.user.password),this.userSV.editUser(this.user.id,this.user.password,this.user.email),this.edit=!0}bloqUser(){this.userSV.bloquearUser(this.user.id,1),localStorage.clear(),this.userSV.SignOut(),this.router.navigate(["/"])}allowEdit(){this.edit=!1}};e.\u0275fac=function(i){return new(i||e)(w(N),w(T))},e.\u0275cmp=U({type:e,selectors:[["app-perfil"]],decls:9,vars:7,consts:[["type","text","placeholder","email",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","password",3,"ngModelChange","ngModel","disabled"],[4,"ngIf"],[3,"click"],["id","btn-edit",3,"click"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(i,r){i&1&&(o(0,"h1"),m(1,"PERFIL"),s(),o(2,"input",0),b("ngModelChange",function(a){return S(r.user.email,a)||(r.user.email=a),a}),s(),o(3,"input",1),b("ngModelChange",function(a){return S(r.user.password,a)||(r.user.password=a),a}),s(),I(4,z,3,0,"div",2)(5,G,3,0,"div",2)(6,H,3,2,"div",2),o(7,"button",3),c("click",function(){return r.bloqUser()}),m(8,"bloquear cuenta"),s()),i&2&&(l(2),v("ngModel",r.user.email),d("disabled",r.edit),l(),v("ngModel",r.user.password),d("disabled",r.edit),l(),d("ngIf",r.edit),l(),d("ngIf",!r.edit),l(),d("ngIf",r.user.role_id=="1"))},dependencies:[P,x,L,D,F,W]});let t=e;return t})();var J=[{path:"",component:A}],B=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=u({type:e}),e.\u0275inj=p({imports:[M.forChild(J),M]});let t=e;return t})();var de=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=u({type:e}),e.\u0275inj=p({imports:[E,B,q]});let t=e;return t})();export{de as PerfilModule};
