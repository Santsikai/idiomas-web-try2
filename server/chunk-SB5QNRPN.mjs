import './polyfills.server.mjs';
import{a as N,b as j}from"./chunk-S54HXTPA.mjs";import{B as W,G as q,w as D,z as F}from"./chunk-TLNNSNR4.mjs";import{m as T,n as x,o as L,p as M}from"./chunk-ULOEEDMH.mjs";import{Ab as m,Ac as E,Eb as v,Fb as S,Gb as b,Jb as V,Ra as l,Sa as w,ca as p,gb as I,ib as d,ma as U,mb as o,na as u,nb as s,pb as y,rb as c,sb as C,ua as h,va as _,yc as P}from"./chunk-WAP4PGVX.mjs";import"./chunk-B5JBQX2M.mjs";import"./chunk-3SZVCSKE.mjs";import{j as g}from"./chunk-H6KHSOBK.mjs";var O=()=>["/pages/admin"];function z(t,e){if(t&1){let f=y();o(0,"div")(1,"button",4),c("click",function(){h(f);let i=C();return _(i.allowEdit())}),m(2,"editar datos"),s()()}}function G(t,e){if(t&1){let f=y();o(0,"div")(1,"button",3),c("click",function(){h(f);let i=C();return _(i.editUser())}),m(2,"guardar cambios"),s()()}}function H(t,e){t&1&&(o(0,"div")(1,"button",5),m(2,"admin"),s()()),t&2&&(l(),d("routerLink",V(1,O)))}var A=(()=>{let e=class e{constructor(n,i){this.userSV=n,this.router=i,this.edit=!0,this.user=new j}ngOnInit(){this.getUser()}getUser(){return g(this,null,function*(){this.getUserData(localStorage.getItem("logUserID"))})}getUserData(n){return g(this,null,function*(){this.user=yield this.userSV.getUser(n)})}editUser(){this.userSV.changePass(this.user.password),this.userSV.editUser(this.user.id,this.user.password,this.user.email),this.edit=!0}bloqUser(){this.userSV.bloquearUser(this.user.id,1),localStorage.clear(),this.userSV.SignOut(),this.router.navigate(["/"])}allowEdit(){this.edit=!1}};e.\u0275fac=function(i){return new(i||e)(w(N),w(T))},e.\u0275cmp=U({type:e,selectors:[["app-perfil"]],decls:9,vars:7,consts:[["type","text","placeholder","email",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","password",3,"ngModelChange","ngModel","disabled"],[4,"ngIf"],[3,"click"],["id","btn-edit",3,"click"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(i,r){i&1&&(o(0,"h1"),m(1,"PERFIL"),s(),o(2,"input",0),b("ngModelChange",function(a){return S(r.user.email,a)||(r.user.email=a),a}),s(),o(3,"input",1),b("ngModelChange",function(a){return S(r.user.password,a)||(r.user.password=a),a}),s(),I(4,z,3,0,"div",2)(5,G,3,0,"div",2)(6,H,3,2,"div",2),o(7,"button",3),c("click",function(){return r.bloqUser()}),m(8,"bloquear cuenta"),s()),i&2&&(l(2),v("ngModel",r.user.email),d("disabled",r.edit),l(),v("ngModel",r.user.password),d("disabled",r.edit),l(),d("ngIf",r.edit),l(),d("ngIf",!r.edit),l(),d("ngIf",r.user.role_id=="1"))},dependencies:[P,x,L,D,F,W]});let t=e;return t})();var J=[{path:"",component:A}],B=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=u({type:e}),e.\u0275inj=p({imports:[M.forChild(J),M]});let t=e;return t})();var de=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=u({type:e}),e.\u0275inj=p({imports:[E,B,q]});let t=e;return t})();export{de as PerfilModule};
